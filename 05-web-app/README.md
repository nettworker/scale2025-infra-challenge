# Задание-5. Развернуть отказоустойчивое Web-приложение

## Описание окружения <a id="environment"/></a>

1. Для вас развёрнуто рабочее окружение в Yandex Cloud:
* [Облако](https://yandex.cloud/ru/docs/resource-manager/concepts/resources-hierarchy#cloud) `scale-N`
* [Каталог ресурсов](https://yandex.cloud/ru/docs/resource-manager/concepts/resources-hierarchy#folder) `default`

2. Доступ к облаку и каталогу будет предоставлен с помощью аутентификации через федерацию удостоверений. 
Учетные данные для аутентификации - имя пользователя вида `scale2025-N` и пароль будут предоставлены через бот.

## Задание <a id="task"/></a>

1. Получить доступ к своему рабочему окружению с помощью [консоли управления](https://yandex.cloud/docs/console), используя полученные учетные данные. 

2. Развернуть отказоустойчивое Web-приложение в составе:
  * Балансировщик нагрузки NLB с публичным IP-адресом, который должен принимать запросы к приложению на порту `http (tcp/80)`.
  * Две ВМ с ПО `nginx` в двух зонах доступности, на которые балансировщик нагрузки будет распределять поступающие запросы к приложению.

    Для развертывания приложения понадобится:
    1. Заполнить корректные значения переменных в файле [terraform.tfvars](./terraform.tfvars).
    2. Исправить неточности в прилагаемых Terraform манифестах.
    3. Инициализировать `Terraform`.
    4. Развернуть отказоустойчивое Web-приложение с помощью `Terraform`.

## Проверка результатов <a id="check"/></a>

### Проверка-1 <a id="check-1"/></a>
Убедиться в том что приложение отвечает на внешние запросы:

```bash
curl http://<публичный-ip-адрес-приложения>
```

или открыть соответствующий URL в веб-браузере.

Критерий успеха - это получение ответа от веб-сервера на нужном порту.

### Проверка-2 <a id="check-2"/></a>
Убедиться в том, что в [группе целевых ресурсов балансировщика NLB](https://yandex.cloud/ru/docs/network-load-balancer/concepts/target-resources) находится `две или более` виртуальные машины.

Для проверки можно использовать следующую команду:

```bash
yc load-balancer target-group get ...
```

После самостоятельного успешного выполнения проверок можно отправлять это задание на проверку с помощью бота следующим образом:

```
/check 5
```
